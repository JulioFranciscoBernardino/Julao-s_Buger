<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Julão's Burger - Meu Cardápio</title>
  <link rel="shortcut icon" href="/imgs/Logo Julãos Burguinho.png" type="image/x-icon">
  <link rel="stylesheet" href="/styles/cardapio.css">
  <link rel="stylesheet" href="/styles/navbar.css" />
  <link rel="stylesheet" href="/styles/formCardapio.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
  <!-- NAVBAR APPLE-STYLE -->
  <nav class="apple-navbar">
    <div class="navbar-container">
      <div class="navbar-left">
        <a href="/index" class="navbar-logo">
          <img src="/imgs/Logo Julãos Burguinho.png" alt="Julão's Burger" class="logo-img">
          <span class="logo-text">Julão's Burger Mega Lanches</span>
        </a>
      </div>
      
      <div class="navbar-center">
        <ul class="navbar-menu">
          <li><a href="admin_dashboard" class="nav-link">Home</a></li>
          <li><a href="cardapio" class="nav-link active">Cardápio</a></li>
          <li><a href="pedidos" class="nav-link">Pedidos</a></li>
        </ul>
      </div>
      
      <div class="navbar-right">
        <button id="logoutBtn" class="logout-btn">
          <i class="fas fa-sign-out-alt"></i>
        </button>
      </div>
      
      <button class="navbar-toggle" type="button" aria-label="Toggle navigation">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </button>
    </div>
  </nav>

  <!-- MODAL DE CATEGORIA -->
  <div id="modalCategoria" class="modal">
    <div class="modal-content">
      <span class="close" id="FecharCategoria">&times;</span>
      <h2>Nova Categoria</h2>
      <form id="formCategoria">
        <input type="text" id="NovaCategoria" class="texto" placeholder="Nome da categoria" required />
        <button type="submit" id="Concluir">Concluir</button>
      </form>
    </div>
  </div>

  <!-- MODAL DE PRODUTO -->
  <div id="modalProduto" class="modal">
    <div class="modal-content">
      <span class="close" id="FecharProduto">&times;</span>
      <h2>Novo Produto</h2>
      <form id="formProduto">
        <label for="nomeProduto">Nome</label><br>
        <input type="text" id="nomeProduto" class="texto" placeholder="Ex: Cheese Burger..." required /><br>
        <label for="descricaoProduto">Descrição</label><br>
        <textarea id="descricaoProduto" class="texto" placeholder="Ex: Hamburguer, queijo..." required></textarea><br>
        <label for="precoProduto">Preço</label><br>
        <input type="number" id="precoProduto" class="texto" placeholder="Ex: 22,90..." required step="0.01" min="0"><br>
        <label for="produtoCategoria">Categoria</label><br>
        <select id="produtoCategoria" class="texto" required></select><br>
        <label for="produtoImagem">Imagem</label><br>
        <input type="file" id="produtoImagem" accept="image/*" onchange="handleImageChange()"><br>
        
        <!-- Seção para nome da imagem -->
        <div id="imageNameSection" style="display: none;">
          <label for="nomeImagem">Nome da Imagem</label><br>
          <input type="text" id="nomeImagem" class="texto" placeholder="Ex: cheese-burger-principal" /><br>
          <small style="color: #666; font-size: 12px;">Nome será usado para salvar a imagem (sem espaços, use hífens)</small><br>
          
          <!-- Preview da imagem -->
          <div id="imagePreview" style="margin-top: 10px; display: none;">
            <img id="previewImg" src="" alt="Preview" style="max-width: 200px; max-height: 150px; border-radius: 8px; border: 1px solid #ddd;">
            <button type="button" onclick="removeImage()" style="margin-left: 10px; padding: 5px 10px; background: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer;">Remover</button>
          </div>
        </div>
        
        <!-- Seção para imagem existente (modo edição) -->
        <div id="existingImageSection" style="display: none;">
          <label>Imagem Atual</label><br>
          <div id="currentImagePreview" style="margin-bottom: 10px;">
            <img id="currentImg" src="" alt="Imagem atual" style="max-width: 200px; max-height: 150px; border-radius: 8px; border: 1px solid #ddd;">
            <div style="margin-top: 5px;">
              <span id="currentImageName" style="font-size: 12px; color: #666;"></span>
            </div>
          </div>
          <button type="button" onclick="toggleImageUpdate()" style="padding: 8px 16px; background: #007aff; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px;">
            <i class="fas fa-edit"></i> Alterar Imagem
          </button>
        </div>
        
        <button type="submit" id="Concluir">Concluir</button>
      </form>
    </div>
  </div>

  <!-- MODAL DE OPCIONAL -->
  <div id="modalOpcional" class="modal">
    <div class="modal-content">
      <span class="close" id="fecharOpcional">&times;</span>
      <h2>Novo Opcional</h2>
      <form id="formOpcional">
        <label for="nomeOpcional">Nome</label><br>
        <input type="text" id="nomeOpcional" class="texto" placeholder="Ex: Bacon Extra..." required /><br>
        <div id="grupoOpcionalContainer">
          <label for="grupoOpcional">Grupo</label><br>
          <select id="grupoOpcional" class="texto" required>
            <option value="">Selecione um grupo</option>
          </select><br>
        </div>
        <label for="tipoOpcional">Tipo</label><br>
        <select id="tipoOpcional" class="texto" required>
          <option value="">Selecione o tipo</option>
          <option value="adicionar">Adicionar</option>
          <option value="remover">Remover</option>
        </select><br>
        <label for="precoOpcional">Preço</label><br>
        <input type="number" id="precoOpcional" class="texto" placeholder="Ex: 3,50..." step="0.01" min="0" value="0"><br>
        <button type="submit" id="concluirOpcional">Concluir</button>
      </form>
    </div>
  </div>

  <!-- MODAL DE GRUPO DE OPCIONAL -->
  <div id="modalGrupoOpcional" class="modal">
    <div class="modal-content">
      <span class="close" id="fecharGrupoOpcional">&times;</span>
      <h2>Novo Grupo de Opcionais</h2>
      <form id="formGrupoOpcional">
        <label for="nomeGrupoOpcional">Nome do Grupo</label><br>
        <input type="text" id="nomeGrupoOpcional" class="texto" placeholder="Ex: Bebidas, Acompanhamentos..." required /><br>
        <label for="descricaoGrupoOpcional">Descrição</label><br>
        <textarea id="descricaoGrupoOpcional" class="texto" placeholder="Ex: Refrigerantes, sucos e bebidas em geral..."></textarea><br>
        <label for="posicaoGrupoOpcional">Posição</label><br>
        <input type="number" id="posicaoGrupoOpcional" class="texto" placeholder="Ex: 1, 2, 3..." min="0" value="0"><br>
        <button type="submit" id="concluirGrupoOpcional">Concluir</button>
      </form>
    </div>
  </div>

  <!-- CARDÁPIO ADMINISTRATIVO -->
  <section class="menu-admin">
    <div class="menu-header">
      <h2>Cardápio Principal</h2>
      <ul class="menu-tabs" id="menuTabs">
        <li class="active" data-tab="0">Cardápio Principal</li>
        <li data-tab="1">Opcionais</li>
      </ul>
    </div>

    <div class="grupo-container">
      <!-- SIDEBAR DE CATEGORIAS -->
      <div class="grupo-sidebar" id="listaCategorias">
        <!-- Categorias serão carregadas aqui -->
      </div>

      <!-- DETALHES DA CATEGORIA ESCOLHIDA -->
      <div class="grupo-detalhes" id="detalhesCategoria">
        <p>Selecione uma categoria para visualizar os produtos.</p>

        <div class="botoes-acoes">
          <button id="btnAddProdutoEstatico" class="btn-adicionar">+ NOVO PRODUTO</button>
          <button class="btn-acao editar"><i class="fas fa-pen"></i></button>
          <button id="btnDeletProduto" class="btn-acao excluir"><i class="fas fa-trash"></i></button>
          <button id="btnSalvarOrdenacao" class="btn-salvar" style="display: none;">
            <i class="fas fa-save"></i> SALVAR ORDENAÇÃO
          </button>
        </div>

        <div id="produtosLista"></div>
      </div>

      <!-- SEÇÃO DE OPCIONAIS (OCULTA POR PADRÃO) -->
      <div class="grupo-detalhes" id="detalhesOpcionais" style="display: none;">
        <div class="opcionais-header">
          <h3>Gerenciar Grupos de Opcionais</h3>
          <div class="opcionais-botoes">
            <button class="btn-adicionar" id="btnAddGrupo">+ Novo Grupo</button>
          </div>
        </div>
        
        <!-- GRUPOS DE OPCIONAIS -->
        <div class="grupos-opcionais-container">
          <div class="grupos-opcionais-lista" id="listaGruposOpcionais">
            <!-- Grupos de opcionais serão carregados aqui -->
          </div>
        </div>
      </div>

    </div>
  </section>

  <!-- LOADING OVERLAY -->
  <div id="loadingOverlay" class="loading-overlay" style="display: none;">
    <div class="loading-spinner">
      <div class="spinner"></div>
      <p class="loading-text">Carregando...</p>
    </div>
  </div>

  <script src="/js/cardapio.js"></script>
  <script src="/js/login_cadastro.js"></script>
  <script src="/js/cardapioNavbarCategoria.js"></script>
  <script src="/js/Sortable.min.js"></script>
  <script src="/js/admin-check.js"></script>

</body>

</html>